"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t,i){e.Mixins=e.Mixins||{},e.Mixins.ProjectDetail={openDetail:function(t,i){if(!e.Data.detailUrl)throw new Error("App.Data.detailUrl must be defined!");var n=new e.Views.LoaderBarPageView,s=new e.Models.Project;s.url=e.Data.detailUrl+"/"+t;new e.Views.ItemDetailView({model:s}).on("itemDetailView:exit",i);n.show(),s.fetch({success:function(){n.hide()}})}}}(App,Backbone,jQuery),function(e,t,i){function n(e){return e<10?"0"+e:e}e.Mixins=e.Mixins||{},e.Mixins.Utility={wait:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){setTimeout(t,e)})},formatDate:function(e){var t=new Date(e);return n(t.getMonth()+1)+"/"+t.getFullYear()}}}(App,Backbone,jQuery),function(e,t,i){e.Routers=e.Routers||{},e.Routers.GalleryRouter=t.Router.extend(_.extend({},e.Mixins.ProjectDetail,{routes:{"!/:projectName":"openProjectDetail","!/filter/:queryString":"showFiltered","*all":"showAll"},initialize:function(t){var i=this;this.rootUrl=t.url,this.galleryCollection=new t.collection,this.gallerylView=new t.view({collection:this.galleryCollection}).on("galleryView:clickOnItem",function(e){var t=e.item.$el.find("a");i.openDetail(t.data("slug")),i.navigate("!/"+t.data("slug"),{replace:!0,trigger:!1})}),this.loader=new e.Views.LoaderBarPageView},showAll:function(){var e=this;this.loader.show(),this.galleryCollection.url=this.rootUrl,this.galleryCollection.fetch({success:function(){e.loader.hide()}})},showFiltered:function(e){var t=this;this.loader.show(),this.galleryCollection.url=this.rootUrl+"?"+e,this.galleryCollection.fetch({reset:!0,success:function(){t.loader.hide()}})},openProjectDetail:function(e){var t=this;this.openDetail(e,function(){t.navigate("#",{replace:!0,trigger:!0})})}}))}(App,Backbone,jQuery),function(e,t,i){e.Routers=e.Routers||{},e.Routers.MaterialRouter=t.Router.extend({routes:{"!/:materialSlug":"showMaterial"},initialize:function(){this.materialModel=new e.Models.Material,this.materialView=new e.Views.MaterialView({model:this.materialModel})},showMaterial:function(e){this.materialModel.set({id:e},{silent:!0}),this.materialModel.fetch()}})}(App,Backbone,jQuery),function(e,t,i){e.Routers=e.Routers||{},e.Routers.SimpleRouter=t.Router.extend({routes:{"!/:slug":"goToDiv"},initialize:function(){var e=this;this.headerHeight=i("#main-header").height(),i(window).on("orientationchange resize",function(){e.headerHeight=i("#main-header").height()})},goToDiv:function(e){var t=i("[data-route="+e+"]");if(t.size()){var n=t.offset().top;i("html,body").animate({scrollTop:n-this.headerHeight})}}})}(App,Backbone,jQuery),function(e,t,i){e.Models=e.Models||{},e.Models.Contact=t.Model.extend({defaults:{id:"",stato:"",provincia:"","referente architetto":"","referente serramentista":"","referente buyer":"","testo architetto":"","testo serramentista":"","testo buyer":""}})}(App,Backbone,jQuery),function(e,t,i){e.Models=e.Models||{},e.Models.Document=t.Model.extend()}(App,Backbone,jQuery),function(e,t,i){e.Models=e.Models||{},e.Models.Material=t.Model.extend({urlRoot:e.Data.current_url})}(App,Backbone,jQuery),function(e,t,i){e.Models=e.Models||{},e.Models.Product=t.Model.extend({defaults:{id:"",name:"",url:"","abstract":"",materials:[],small_image:""}})}(App,Backbone,jQuery),function(e,t,i){e.Models=e.Models||{},e.Models.Project=t.Model.extend({defaults:{id:"",name:"",location:"",small_image:""}})}(App,Backbone,jQuery),function(e,t,i){e.Collections=e.Collections||{},e.Collections.Contacts=t.Collection.extend({model:e.Models.Contact}),_.extend(e.Collections.Contacts.prototype,{getCountries:function(){return _.uniq(this.pluck("stato")).sort()},getRegions:function(e){var t=_.uniq(_.pluck(_.pluck(this.filter({stato:e}),"attributes"),"provincia")).sort();return""==t[0]&&1==t.length?[]:t},getContactInfo:function(e,t){return this.filter({stato:e,provincia:t})[0]}})}(App,Backbone,jQuery),function(e,t,i){e.Collections=e.Collections||{},e.Collections.Documents=t.Collection.extend({url:e.Data.documentsApiEndpoint,model:e.Models.Document})}(App,Backbone,jQuery),function(e,t,i){e.Collections=e.Collections||{},e.Collections.Products=t.Collection.extend({url:e.Data.apiUrl,model:e.Models.Product})}(App,Backbone,jQuery),function(e,t,i){e.Collections=e.Collections||{},e.Collections.Projects=t.Collection.extend({url:e.Data.apiUrl,model:e.Models.Project})}(App,Backbone,jQuery),function(e,t,i){e.Views=e.Views||{},e.Views.AdvView=t.View.extend({tmpl:_.template(i("#adv-tmpl").html()||""),events:{"click a[data-id]":"openDetail"},initialize:function(){this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"reset",this.render)},render:function(){return this.$el.find("ul").html(this.tmpl({adv:this.collection.toJSON()})),this},openDetail:function(t){t.preventDefault();var i=t.currentTarget.getAttribute("data-id"),n=new e.Views.ItemDetailView({model:this.collection.get(i)});n.render()}})}(App,Backbone,jQuery),function(e,t,i,n){e.Views=e.Views||{},e.Views.ContactsView=t.View.extend({events:{"change #contact-country":"onSelectCountry","change #contact-region":"onSelectRegion"},tmplCountry:n.template(i("#contact-select-country-tmpl").html()||""),tmplRegion:n.template(i("#contact-select-region-tmpl").html()||""),tmplEmail:n.template(i("#contact-select-email-tmpl").html()||""),initialize:function(e){return!!this.$el.size()&&void(this.state={country:"",region:"",email:"",text:""})},setContactInfo:function(t,i){var n=this.collection.getContactInfo(t,i);this.state.email=n?n.attributes["referente "+e.Data.contactType]:"",this.state.text=n?n.attributes["testo "+e.Data.contactType]:""},onSelectCountry:function(e){e.preventDefault(),this.state.country=e.currentTarget.value,this.setContactInfo(this.state.country,""),this.render()},onSelectRegion:function(e){e.preventDefault(),this.state.region=e.currentTarget.value,this.setContactInfo(this.state.country,this.state.region),this.render()},render:function(){var t=i("<div />"),n=this.tmplCountry({countries:this.collection.getCountries(),selected:this.state.country});if(t.append(n),this.state.country&&this.collection.getRegions(this.state.country).length){var s=this.tmplRegion({regions:this.collection.getRegions(this.state.country),selected:this.state.region});t.append(s)}""!=this.state.email&&t.append(this.tmplEmail({email:this.state.email})),""!=this.state.text&&t.append("<p id='contact-text'>"+this.state.text+"</p>"),this.$el.html(t),Modernizr.touch||this.$el.find("select").chosen({no_results_text:e.Data.translations.no_results_text})}})}(App,Backbone,jQuery,_),function(e,t,i,n){e.Views=e.Views||{},e.Views.FilterTableView=t.View.extend({tmpl:n.template(i("#filter-table-tmpl").html()||""),events:{"click [data-order-by]":"orderBy","keyup .search":"search"},initialize:function(e){this.state={},this.initialCollection=n.clone(this.collection),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"sort",this.render)},render:function(){this.$el.find("tbody").html(this.tmpl({documents:this.collection.toJSON(),state:this.state}))},orderBy:function s(e){var t=this;e.preventDefault();var s=i(e.currentTarget).data("order-by");this.state[s]=!this.state[s],this.collection.comparator=function(e,i){return e.attributes[s]>i.attributes[s]?1*(t.state[s]?1:-1):e.attributes[s]<i.attributes[s]?-1*(t.state[s]?1:-1):0},this.collection.sort()},search:function(e){var t=i(e.currentTarget).val(),n=[];n=t&&""!==t?this.initialCollection.select(function(e){return e.attributes.name.match(new RegExp(t,"i"))}):this.initialCollection.models,this.collection.reset(n)}})}(App,Backbone,jQuery,_);var _slicedToArray=function(){function e(e,t){var i=[],n=!0,s=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(a){s=!0,o=a}finally{try{!n&&l["return"]&&l["return"]()}finally{if(s)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e,t,i){function n(e){var t={},i=e.split("&");return _.each(i,function(e){var i=e.split("="),n=_slicedToArray(i,2),s=n[0],o=n[1];o&&(t[s]=o)}),t}e.Views=e.Views||{},e.Models=e.Models||{},e.Views.GalleryFilterView=t.View.extend({el:"#gallery-filters",events:{"submit form":"update","focus input[name=q]":"clearSelect","click .clear-filters":"clear"},initialize:function(e){var t=this;this.props=e,this.filterNames=_.keys(this.model.attributes),this.render(n(window.location.hash.replace("#!/filter/",""))),this.$el.find(".custom-select").selectToList().on("change",function(e){t.clearInput(),t.update(e)})},update:function(e){e.preventDefault();var t=n(this.$el.find("form").serialize());this.model.clear({silent:!0}).set(t),this.props.onUpdate(this.model)},render:function(e){var t=this;this.filterNames.map(function(i){e&&e[i]&&t.$el.find("[name="+i+"]").val(e[i])})},clear:function(e){e.preventDefault(),this.clearSelect(),this.clearInput()},clearInput:function(){this.$el.find("input[name=q]").size()&&this.$el.find("input[name=q]").val("")},clearSelect:function(){this.$el.find(".custom-select").each(function(e,t){var n=i(t);n.data("selectToList")?n.data("selectToList").clear():n.val(n.find("option").get(0).value)})}})}(App,Backbone,jQuery),function(e,t,i){e.Views=e.Views||{},e.Views.GalleryView=t.View.extend({el:".gallery",initialize:function(){this.noFoundTmpl=_.template(i("#no-found-tmpl").html()),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.render)},render:function(){var t=this,n=i("<ul>"),s=this.collection.models;return _.each(s,function(i){var s=new e.Views.ItemView({model:i});s.on("itemView:click",function(){t.trigger("galleryView:clickOnItem",{item:s})}),n.append(s.render().el)}),s.length?this.$el.html(n):this.$el.html(this.noFoundTmpl),this}}),_.extend(e.Views.GalleryView,t.Events)}(App,Backbone,jQuery),function(e,t,i){e.Views=e.Views||{},e.Views.ItemDetailView=t.View.extend({el:"#item-detail-view",tmpl:_.template(i("#item-detail-tmpl").html()||""),events:{"click .toggle-info":"toggleInfo","click .close":"removeView"},initialize:function(){this.listenTo(this.model,"change",this.render),i(document).on("keydown",this.onKeyPressed.bind(this))},render:function(){this.$el.addClass("active"),this.$el.html(this.tmpl({item:this.model.toJSON()})),this.$el.focus(),this.postRender()},postRender:function(){this.$fullscreen=this.$el.find(".fullscreen"),this.$projectInfo=this.$el.find(".project-info"),this.$fullscreen.fullscreen(),this.$fullscreen.gallery()},onKeyPressed:function(e){27==e.keyCode&&this.removeView()},toggleInfo:function(e){e.preventDefault(),this.$projectInfo.toggleClass("open")},removeView:function(e){e&&e.preventDefault(),this.stopListening(),i(document).off("keydown",this.onKeyPressed.bind(this)),this.$el.removeClass("active"),this.trigger("itemDetailView:exit")}}),_.extend(e.Views.ItemDetailView,t.Events)}(App,Backbone,jQuery),function(e,t,i){e.Views=e.Views||{},e.Views.ItemView=t.View.extend({tagName:"li",tmpl:_.template(i("#item-tmpl").html()||""),events:{"click a":"onClick"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},render:function(){return this.$el.html(this.tmpl({item:this.model.toJSON()})),this},onClick:function(e){e.currentTarget.hasAttribute("data-direct-link")||(e.preventDefault(),this.trigger("itemView:click"))}}),_.extend(e.Views.ItemView,t.Events)}(App,Backbone,jQuery),function(e,t,i){e.Views=e.Views||{},e.Views.LanguageSwitcherView=t.View.extend({el:"#language-switcher",events:{"change select":"change"},initialize:function(e){this.options=e},change:function(e){this.options.loader.show(),location.href=e.currentTarget.value}})}(App,Backbone,jQuery),function(e,t,i){e.Views=e.Views||{},e.Views.LoaderBarPageView=t.View.extend({el:".loader-bar-page",show:function(){this.$el.show()},hide:function(){this.$el.hide()}})}(App,Backbone,jQuery),function(e,t,i){e.Views=e.Views||{},e.Views.MaterialView=t.View.extend({el:"#injected-content",tmpl:_.template(i("#single-material-tmpl").html()||""),initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.tmpl({material:this.model.toJSON()})),this}})}(App,Backbone,jQuery),function(e,t,i,n){e.Views=e.Views||{},e.Views.NewsletterView=t.View.extend({el:".newsletter",tmplRegistered:n.template(i("#newsletter-registered").html()||""),events:{"submit form":"subscribe"},initialize:function(){this.$form=this.$el.find("form"),this.loader=new e.Views.LoaderBarPageView,this.$el.find(".input-text-group.animate").inputText()},subscribe:function(e){var t=this;e.preventDefault(),this.loader.show(),i.ajax({method:this.$form.attr("method"),url:this.$form.attr("action"),data:this.$form.serialize()}).done(function(){t.$el.html(t.tmplRegistered()),t.$form.find(".errors").empty()}).fail(function(e){i.each(e.responseJSON.errors,function(e,i){t.$form.find(".errors").append(i)})}).complete(function(){return t.loader.hide()})}}),e.Views.NewsletterSimpleView=t.View.extend({el:".newsletter",events:{"change input":"toggleNewsletter"},initialize:function(){this.loader=new e.Views.LoaderBarPageView},toggleNewsletter:function(e){if(e.preventDefault(),!this.$el.size())return!1;this.loader.show();var t=i(e.currentTarget);t.prop("checked")?this.registerNewsletter():this.removeFromNewsletter()},registerNewsletter:function(){var t=this;i.ajax({method:"POST",url:e.Data.NEWSLETTER_SUBSCRIBE_CURRENT_USER}).complete(function(){return t.loader.hide()})},removeFromNewsletter:function(){var t=this;i.ajax({method:"POST",url:e.Data.NEWSLETTER_UNSUBSCRIBE_CURRENT_USER}).complete(function(){return t.loader.hide()})}})}(App,Backbone,jQuery,_),function(e,t,i){e.Views=e.Views||{},e.Views.PressView=t.View.extend({tmpl:_.template(i("#press-tmpl").html()||""),events:{"keyup .search":"search"},initialize:function(){this.initialCollection=_.clone(this.collection),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"reset",this.render)},render:function(){return this.$el.find(".year-block-container").html(this.tmpl({years:this.collection.toJSON()})),this},search:function(e){var t=i(e.currentTarget).val(),n=[];t&&""!==t?_.each(this.initialCollection.models,function(e){e.attributes.press.length&&_.each(e.attributes.press,function(e){if(e.title.match(new RegExp(t,"i"))){_.pluck(n,"year").length||n.push({year:e.year,press:[]});var i=_.findWhere(n,{year:e.year});i.press.push(e)}})}):n=this.initialCollection.models,this.collection.reset(n)}})}(App,Backbone,jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t={wrapperSelector:".slide",classActive:!0},i=function(){function i(n,s){_classCallCheck(this,i),this.el=n,this.$el=e(n),this.options=e.extend({},t,s),this.$wrapper=this.$el.parents(this.options.wrapperSelector).eq(0),this.init()}return _createClass(i,[{key:"init",value:function(){this.centerImageInWrapper(),this.$el.one("load",this.centerImageInWrapper.bind(this)),e(window).on("orientationchange resize",this.centerImageInWrapper.bind(this))}},{key:"centerImageInWrapper",value:function(){var e=this.$wrapper.width(),t=this.$wrapper.height(),i=e/t,n=this.$el.width()/this.$el.height();if(n){if(n<i){var s=e/n,o=(t-s)/2;this.$el.css({marginTop:o,marginLeft:0,width:"100%",height:"auto"})}else{var r=t*n,l=(e-r)/2;this.$el.css({marginTop:0,marginLeft:l,height:"100%",width:"auto"})}this.active=!0,this.options.classActive&&this.$wrapper.addClass("active")}}}]),i}();e.fn.centerImage=function(e){return this.each(function(){return new i(this,e)})}}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t={idx:0,time:5e3,wrapper:".background"},i=function(){function i(n,s){_classCallCheck(this,i),this.el=n,this.$el=e(n),this.options=e.extend({},t,s),this.init()}return _createClass(i,[{key:"init",value:function(){this.$wrapper=e(this.options.wrapper),App.Mixins.Utility.wait(this.options.time).then(this.fadeImages.bind(this))}},{key:"fadeImages",value:function(){var e=this;this.$wrapper.removeClass("active"),this.$wrapper.eq(this.options.idx).addClass("active"),this.options.idx=(this.options.idx+1)%this.$wrapper.size(),Promise.all([this.loadImage(this.$wrapper.eq(this.options.idx)),App.Mixins.Utility.wait(this.options.time)]).then(function(t){t&&t[0]&&t[0].centerImage({wrapperSelector:e.options.wrapper,classActive:!1}),e.fadeImages()},function(e){alert(e)})}},{key:"loadImage",value:function(t){return new Promise(function(i,n){var s=t.find("img");s.one("load",function(){i(s)}),t.find("[data-srcset]").each(function(t,i){var n=e(i);n.attr("srcset",n.data("srcset"))}),picturefill({reevaluate:!0,elements:[s.get(0)]}),s.get(0).complete&&i()})}}]),i}();e.fn.fadeImages=function(e){return this.each(function(){return new i(this,e)})}}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t=function(){function t(i,n){_classCallCheck(this,t),this.el=i,this.$el=e(i),this.offsets=[],this.init()}return _createClass(t,[{key:"refreshOffset",value:function(t){var i=this;this.offsets=[];var n=[];t.find(".exploded").size()?(n=t.find("li a"),n.each(function(t,n){var s="#"+e(n).data("value");s&&e(s).size()&&i.offsets.push({id:s,offset:e(s).offset().top-400})})):(n=t.find("select option"),n.each(function(t,n){var s=e(n),o="#"+s.prop("value");o&&e(o).size()&&i.offsets.push({id:o,offset:e(o).offset().top-400})}))}},{key:"init",value:function(){this.refreshOffset(this.$el),this.offsetsValues=_.pluck(this.offsets,"offset"),this.initListeners()}},{key:"initListeners",value:function(){var t=this;e(window).on("scroll",function(){t.y=window.pageYOffset}),e(window).on("resize orientationchange",function(){return t.refreshOffset(t.$el)}),window.requestAnimationFrame(function(){return t.render()})}},{key:"render",value:function(){var e=this;window.requestAnimationFrame(function(){e.render()});var t=void 0;_.each(this.offsetsValues,function(i,n){n==e.offsetsValues.length-1?e.y>i&&(t=e.offsets[n]):e.y>=i&&e.y<e.offsetsValues[n+1]&&(t=e.offsets[n])}),this.$el.trigger("followNavigation:selected",{data:t})}}]),t}();e.fn.followNavigation=function(e){return this.each(function(){return new t(this,e)})}}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t={},i=function(){function i(n,s){_classCallCheck(this,i),this.el=n,this.$el=e(n),this.options=e.extend({},t,s),this.setFullscreen(),this.init()}return _createClass(i,[{key:"init",value:function(){e(window).on("orientationchange resize",this.setFullscreen.bind(this)),e(window).on("scroll",this.hideRemeberToScoll.bind(this))}},{key:"setFullscreen",value:function(){var e=window.innerWidth>990?50:65;window.innerWidth>window.innerHeight&&window.innerWidth<768&&(e=0),this.$el.height(window.innerHeight-e)}},{key:"hideRemeberToScoll",value:function(){this.$el.find(".remember-to-scroll").hide(),this.$el.addClass("scrolled"),e(window).off("scroll",this.hideRemeberToScoll.bind(this))}}]),i}();e.fn.fullscreen=function(e){return this.each(function(){return new i(this,e)})}}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t={showDots:!1},i=function(){function i(n,s){_classCallCheck(this,i),this.wrapper=n,this.$wrapper=e(n),this.$ul=this.$wrapper.find("ul"),this.$li=this.$wrapper.find("li"),this.$prev=this.$wrapper.find(".prev"),this.$next=this.$wrapper.find(".next"),this.options=e.extend({},t,s),1==this.$li.size()&&(this.options.showDots=0),this.init()}return _createClass(i,[{key:"init",value:function(){if(this.galleryItems=this.$li.size(),this.$dots=[],this.onResize(),e(window).on("resize",this.onResize.bind(this)),e(window).on("orientationchange",this.onOrientationChange.bind(this)),this.$li.find("img").centerImage({wrapperSelector:"li"}),this.iscroll=new IScroll(this.$wrapper.get(0),{scrollX:!0,scrollY:!1,momentum:!1,snap:!0,snapSpeed:400,keyBindings:!0,click:!0}),this.options.showDots){var t="";_.range(this.$li.size()).map(function(e,i){t+=0==i?"<li class='active'></li>":"<li></li>"}),this.$wrapper.append('\n                        <ol class="dots">\n                            '+t.toString()+"\n                        </ol>\n                    "),this.$dots=this.$wrapper.find(".dots li")}this.initListeners()}},{key:"initListeners",value:function(){var t=this;this.iscroll.on("scrollEnd",function(){var e=t.$li.eq(t.iscroll.currentPage.pageX);t.loadImage(e),t.options.showDots&&t.updateDots(t.iscroll.currentPage.pageX),t.options.onChange&&t.options.onChange(e,t.iscroll.currentPage.pageX),t.iscroll.currentPage.pageX<t.galleryItems-1?t.$next.addClass("active"):t.$next.removeClass("active"),t.iscroll.currentPage.pageX>0?t.$prev.addClass("active"):t.$prev.removeClass("active")}),this.$prev.on("click",function(e){e.preventDefault(),t.iscroll.prev(500)}),this.$next.on("click",function(e){e.preventDefault(),t.iscroll.next(500)}),this.options.showDots&&this.$dots.on("click",function(i){var n=e(i.currentTarget).index();t.iscroll.goToPage(n,0,500)})}},{key:"updateDots",value:function(e){this.$dots.removeClass("active"),this.$dots.eq(e).addClass("active")}},{key:"onResize",value:function(){this.wrapperWidth=this.$wrapper.width(),this.$ul.width(this.wrapperWidth*this.galleryItems),this.$li.width(100/this.galleryItems+"%")}},{key:"onOrientationChange",value:function(){location.reload()}},{key:"loadImage",value:function(t){var i=t.find("img");t.find("[data-srcset]").each(function(t,i){var n=e(i);n.attr("srcset",n.data("srcset"))}),picturefill({reevaluate:!0,elements:[i.get(0)]})}}]),i}();e.fn.gallery=function(e){return this.each(function(){return new i(this,e)})}}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e){var t={},i=function(){function i(n,s){_classCallCheck(this,i),this.el=n,this.$el=e(n),this.options=e.extend({},t,s),this.init()}return _createClass(i,[{key:"init",value:function(){var e=this;""!=this.$el.find("input").val()&&this.$el.addClass("active"),this.$el.on("focus","input",function(){e.$el.addClass("active")}),this.$el.on("blur","input",function(t){""==t.currentTarget.value&&e.$el.removeClass("active")})}}]),i}();e.fn.inputText=function(e){return this.each(function(){return new i(this,e)})}}(jQuery);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(e,t){var i={disabled:Modernizr.touch,exploded:!1},n=t.template('\n        <strong><%= selected.label  %></strong>\n        <ul>\n            <% _.each(options, function(option) { %>\n                <li><a data-value="<%= option.value  %>" href="#<%= option.value  %>"><%= option.label  %></a></li>\n            <% }); %>\n        </ul>\n        <% if (selected.value) { %>\n            <input type="hidden" name="<%= fieldName %>" value="<%= selected.value %>" />\n        <% } %>\n        <i class="fa fa-angle-down"></i>\n        <i class="fa fa-angle-up"></i>\n    '),s=t.template('\n        <ul>\n            <% _.each(options, function(option) { %>\n                <li><a data-value="<%= option.value  %>" href="<%= option.link  %>"><%= option.label  %></a></li>\n            <% }); %>\n        </ul>\n    '),o=function(){function t(n,s){_classCallCheck(this,t),this.el=n,this.$el=e(n),this.options=e.extend({},i,s),this.$original=this.$el.clone(),this.fieldName="",this.selectOptions=[],this.selectedOption={},this.init()}return _createClass(t,[{key:"init",value:function(){if(this.options.disabled)return!1;this.$el.addClass("converted"),this.options.exploded&&this.$el.addClass("exploded"),this.fieldName=this.$el.find("select").attr("name");var e=this.extractDataFromSelect(this.$el);this.selectOptions=e.selectOptions,this.selectedOption=e.selectedOption,this.addBinding(this.$el),this.render()}},{key:"reset",value:function(){this.$el.removeClass("converted"),this.$el.removeClass("exploded"),this.removeBinding(this.$el),this.$el.html(this.$original.html())}},{key:"apply",value:function(){this.$el.hasClass("converted")||(this.$el.addClass("converted"),this.options.exploded&&this.$el.addClass("exploded"),this.addBinding(this.$el),this.render())}},{key:"extractDataFromSelect",value:function(e){var t=[],i={};return e.find("option").each(function(e,n){n.selected&&(i.label=n.innerHTML,i.value=n.value),t.push({label:n.innerHTML,value:n.value,link:n.getAttribute("data-link")?n.getAttribute("data-link"):"#"+n.value})}),{selectOptions:t,selectedOption:i}}},{key:"render",value:function(){return this.options.exploded?this.$el.html(s({options:this.selectOptions,selected:this.selectedOption,fieldName:this.fieldName})):this.$el.html(n({options:this.selectOptions,selected:this.selectedOption,fieldName:this.fieldName})),this}},{key:"addBinding",value:function(e){e.on("click","li a",this.onChange.bind(this)),e.on("click","strong",this.onToggle.bind(this))}},{key:"removeBinding",value:function(e){e.off("click","li a",this.onChange.bind(this)),e.off("click","strong",this.onToggle.bind(this))}},{key:"onChange",value:function(e){e.preventDefault();var t=e.currentTarget;this.selectedOption={label:t.innerHTML,value:t.getAttribute("data-value"),link:t.getAttribute("href")},this.render(),this.onToggle(e),this.$el.trigger("change",{name:this.fieldName,value:this.selectedOption.value,link:this.selectedOption.link})}},{key:"clear",value:function(){var e=this.$el.find("li").eq(0).find("a").get(0);this.selectedOption={label:e.innerHTML,value:e.getAttribute("data-value")},this.render(),this.$el.trigger("change",{name:this.fieldName,value:this.selectedOption.value})}},{key:"onToggle",value:function(e){e.preventDefault(),this.$el.toggleClass("open")}}]),t}();e.fn.selectToList=function(t){return this.each(function(){e.data(this,"selectToList")||e.data(this,"selectToList",new o(this,t))})}}(jQuery,_),function(e,t){e(function(){var i=new t.Views.LoaderBarPageView;new t.Views.LanguageSwitcherView({loader:i});var n=e(".jumbotron");n.size()&&n.find("img").centerImage({wrapperSelector:".jumbotron"});var s=e("#main-menu"),o=s.find(".sub-menu");e(".toggle-menu").on("touchend",function(t){t.preventDefault(),e(window).scrollTop(0),e("#main-header").toggleClass("fixed"),e("#main-menu").toggleClass("active")}),Modernizr.touch&&window.innerWidth<992&&(e("#main-menu .navigation > li > a:not([data-direct-link])").on("click",function(e){e.preventDefault()}).on("touchend",function(t){t.preventDefault();var i=e(t.currentTarget).parents("li").eq(0).hasClass("active");o.removeClass("active"),s.find("> ul > li").removeClass("active"),i?(e(t.currentTarget).parents("li").eq(0).removeClass("active"),e(t.currentTarget).next(".sub-menu").removeClass("active")):(e(t.currentTarget).parents("li").eq(0).addClass("active"),e(t.currentTarget).next(".sub-menu").addClass("active"))}),o.find("a").on("click",function(){e("#main-header").toggleClass("fixed"),e("#main-menu").toggleClass("active")}))})}(jQuery,App);